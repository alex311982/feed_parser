parameters:

    twitter_access_token: "%env(TWITTER_ACCESS_TOKEN)%"
    twitter_access_token_secret: "%env(TWITTER_ACCESS_TOKEN_SECRET)%"
    twitter_consumer_key: "%env(TWITTER_CONSUMER_KEY)%"
    twitter_consumer_secret: "%env(TWITTER_CONSUMER_SECRET)%"

    twitter_stream_ids:
        - 240195591
        - 240195592

services:

    app:
        class: Feeder\App
        arguments: ['@feed.manager']

    feed.manager:
        class: Feeder\Manager\FeedManager
        calls:
            - [addFeedAdapter, ['@feed.twitter_stream_adapter']]

    feed.stream_handler:
        class: Feeder\Service\FeedHandlerStreamer
        lazy:  true

    feed.twitter_stream:
        class: Feeder\Listner\UserTwitterStreamListener
        arguments: ['@event_dispatcher', '@feed.stream_handler', '%twitter_access_token%', '%twitter_access_token_secret%', '%twitter_consumer_key%', '%twitter_consumer_secret%', '%twitter_stream_ids%']
        lazy:  true
        tags:
            - { name: kernel.event_listener, event: twitter.feed_update, method: onFeedUpdate }

    feed.mock_twitter_stream:
        class: Feeder\Subscriber\MockUserTwitterStreamSubscriber
        lazy:  true

    feed.twitter_stream_adapter:
        class: Feeder\Adapter\TwitterStreamAdapter
        arguments: ['@feed.mock_twitter_stream']
        lazy:  true

    feed.stream_server:
        class: Feeder\Service\FeedServer


